<div class="animated fadeIn">


  <div class="row">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-header bg-success">
          <i class="fa fa-plus"></i> {{ 'addNew' | translate }}


        </div>
        <div class="card-body">
          <div class="col-lg-12">
            <div class="text-right">
              <button class="btn btn-info" (click)='save()'><i class="fa fa-save"></i>
                {{ 'c.add' | translate }}</button>
            </div>
          </div>

          <hr>
          <div class="row">
            <label class="text-danger">(*) {{ 'reqField' | translate }}</label>
          </div>


          <div class="row">
            <div class="col-md-12">
              <label class="">{{ 'doctorOffice' | translate }}</label>
              <span *ngIf='!invoice.officeId' class="text-danger"> * </span>
              <select class="form-control" [(ngModel)]='invoice.officeId'>
                <option *ngFor='let item of offices' [value]=item.id>{{item.name}}</option>
              </select>
            </div>

          </div>
          <div class="row">
            <div class="col-md-6">
              <label class="">{{ 'currency' | translate }}</label>
              <span *ngIf='!invoice.currencyId' class="text-danger"> * </span>
              <select class="form-control" [(ngModel)]='invoice.currencyId'>
                <option *ngFor='let item of currency' [value]=item.id>{{item.name}}</option>
              </select>
            </div>
            <div class="col-md-6" >
              <label class="">{{ 'discountReason' | translate }}</label>
  
              <select class="form-control"
                 
                  [(ngModel)]='invoice.discountReasonId'>
                  <option *ngFor='let item of reasonsDiscount' [value]=item.id>{{item.name}}
                  </option>
              </select>
          </div>
          </div>
      
          <div class="row">
            <div class="col-md-12">
              <label class="">{{ 'patient' | translate }}</label>
              <span *ngIf='!invoice.patientId' class="text-danger"> * </span>
              <input type="text" [ngbTypeahead]="searchPatient" (selectItem)="selectOnePatient($event)"
                [(ngModel)]='selectedPatient' [resultFormatter]="formatterPatient" [inputFormatter]="formatterPatient"
                class="form-control m-input">
            </div>
          </div>
          <hr>
          <div class="row">
            <div class="col-md-8">
              <div class="card">
                <div class="card-header bg-info">
                  <i class="fa fa-money"></i> {{ 'detailToBill' | translate }}


                </div>
                <div class="card-body">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th>{{ 'processDate' | translate }}</th>
                        <th>{{ 'patientName' | translate }}</th>
                        <th>{{ 'proccessName' | translate }}</th>
                        <th>{{ 'price' | translate }}</th>
                        <th>{{ 'actions' | translate }}</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor='let item of arrayServices;let i=index'>
                        <td>{{item.date | date}}</td>
                        <td>{{item.patientName}}</td>
                        <td>{{item.serviceName}}</td>
                        <td><input type="text" (keyup)='sumTotal()' class="form-control" [(ngModel)]='item.amount'>
                        </td>
                        <td><button (click)=onDeleteItem(i) class="btn btn-danger"><i class="fa fa-trash"></i></button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card">
                <div class="card-header bg-info">
                  <i class="fa fa-money"></i> {{ 'amounts' | translate }}
                </div>
                <div class="card-body">
                  <div class="row">
                    <label><b>{{ 'totalQtyToInvoice' | translate }}:</b></label>
                    <input readonly class="form-control" [(ngModel)]='arrayServices.length'>
                  </div>
                  <div class="row">
                    <label><b>{{ 'amountToInvoice' | translate }}:</b></label>
                    <input readonly [(ngModel)]='total' class="form-control">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--/.col-->
  </div>
  <!--/.row-->
</div>